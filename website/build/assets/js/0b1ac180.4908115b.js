"use strict";(globalThis.webpackChunkknowledgepulse_docs=globalThis.webpackChunkknowledgepulse_docs||[]).push([[863],{6264(e,r,n){n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"architecture/overview","title":"Architecture Overview","description":"Dual-layer architecture, protocol stack, and monorepo structure of KnowledgePulse.","source":"@site/docs/architecture/overview.md","sourceDirName":"architecture","slug":"/architecture/overview","permalink":"/docs/architecture/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/openclaw/knowledgepulse/tree/main/website/docs/architecture/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Architecture Overview","description":"Dual-layer architecture, protocol stack, and monorepo structure of KnowledgePulse."},"sidebar":"docsSidebar","previous":{"title":"Core Concepts","permalink":"/docs/getting-started/concepts"},"next":{"title":"KnowledgeUnit Protocol","permalink":"/docs/architecture/protocol"}}');var s=n(4848),i=n(8453);const o={sidebar_position:1,title:"Architecture Overview",description:"Dual-layer architecture, protocol stack, and monorepo structure of KnowledgePulse."},c="Architecture Overview",d={},l=[{value:"Protocol Stack",id:"protocol-stack",level:2},{value:"Component Overview",id:"component-overview",level:2},{value:"SDK",id:"sdk",level:3},{value:"Registry",id:"registry",level:3},{value:"MCP Server",id:"mcp-server",level:3},{value:"CLI",id:"cli",level:3},{value:"Monorepo Structure",id:"monorepo-structure",level:2},{value:"Storage Model",id:"storage-model",level:2},{value:"Tech Stack",id:"tech-stack",level:2}];function a(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,s.jsxs)(r.p,{children:["KnowledgePulse is an AI knowledge-sharing protocol built on a dual-layer architecture. The ",(0,s.jsx)(r.strong,{children:"protocol layer"})," defines how knowledge is structured, discovered, and governed, while the ",(0,s.jsx)(r.strong,{children:"infrastructure layer"})," provides the concrete runtime components that implement the protocol."]}),"\n",(0,s.jsx)(r.h2,{id:"protocol-stack",children:"Protocol Stack"}),"\n",(0,s.jsx)(r.p,{children:"The protocol is organized into five layers, each building on the one below it:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            5. Governance                \u2502\n\u2502   Licensing, attribution, audit trail   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            4. Privacy                   \u2502\n\u2502   Scoping, redaction, GDPR compliance   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            3. Discovery                 \u2502\n\u2502   Search, scoring, vector retrieval     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            2. KnowledgeUnit             \u2502\n\u2502   JSON-LD schema, types, versioning     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502            1. SKILL.md                  \u2502\n\u2502   Agent capability declaration format   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Layer 1 -- SKILL.md"})," defines a standard file format for agents to declare their capabilities, inputs, outputs, and constraints. It is the foundational contract that other layers reference."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Layer 2 -- KnowledgeUnit"})," specifies the JSON-LD schema for three knowledge types (traces, patterns, and SOPs) and the versioning rules that govern schema evolution."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Layer 3 -- Discovery"})," covers how knowledge units are indexed, searched, scored for relevance, and retrieved -- including vector-based similarity search."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Layer 4 -- Privacy"})," handles scoping rules, field-level redaction, and GDPR-mandated operations such as data export and the right to be forgotten."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Layer 5 -- Governance"})," addresses licensing, attribution chains, and audit trails that track how knowledge flows between agents."]}),"\n",(0,s.jsx)(r.h2,{id:"component-overview",children:"Component Overview"}),"\n",(0,s.jsx)(r.p,{children:"Four runtime components implement the protocol stack:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Component"}),(0,s.jsx)(r.th,{children:"Package"}),(0,s.jsx)(r.th,{children:"Role"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"SDK"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@knowledgepulse/sdk"})}),(0,s.jsx)(r.td,{children:"Core library -- types, capture, retrieve, scoring, SKILL.md parsing, migrations"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Registry"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"registry/"})}),(0,s.jsx)(r.td,{children:"Hono REST API server -- stores knowledge units, handles auth, rate limiting"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"MCP Server"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@knowledgepulse/mcp"})}),(0,s.jsx)(r.td,{children:"Model Context Protocol server -- exposes 6 MCP tools, dual-mode registry bridge"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"CLI"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"@knowledgepulse/cli"})}),(0,s.jsx)(r.td,{children:"Command-line interface -- search, install, validate, contribute, auth, security"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"sdk",children:"SDK"}),"\n",(0,s.jsxs)(r.p,{children:["The SDK (",(0,s.jsx)(r.code,{children:"packages/sdk"}),") is the core library that all other components depend on. It provides TypeScript types generated from Zod schemas, functions for capturing and retrieving knowledge units, relevance scoring, SKILL.md parsing and sanitization, and chainable migration functions for schema version upgrades."]}),"\n",(0,s.jsx)(r.h3,{id:"registry",children:"Registry"}),"\n",(0,s.jsxs)(r.p,{children:["The Registry (",(0,s.jsx)(r.code,{children:"registry/"}),") is a Hono-based REST API server that acts as the central store for knowledge units. It handles authentication via Bearer tokens, tier-based rate limiting, and exposes CRUD endpoints for knowledge units."]}),"\n",(0,s.jsx)(r.h3,{id:"mcp-server",children:"MCP Server"}),"\n",(0,s.jsxs)(r.p,{children:["The MCP Server (",(0,s.jsx)(r.code,{children:"packages/mcp-server"}),") exposes KnowledgePulse functionality through the Model Context Protocol, making it accessible to any MCP-compatible AI client. It operates in ",(0,s.jsx)(r.strong,{children:"dual mode"}),":"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Standalone mode"})," -- runs with its own in-memory store."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Proxy mode"})," -- bridges to a remote registry via the ",(0,s.jsx)(r.code,{children:"KP_REGISTRY_URL"})," environment variable."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"cli",children:"CLI"}),"\n",(0,s.jsxs)(r.p,{children:["The CLI (",(0,s.jsx)(r.code,{children:"packages/cli"}),") provides a command-line interface for developers and agents to interact with the protocol -- searching for knowledge, installing SKILL.md files, validating schemas, contributing knowledge units, and managing authentication."]}),"\n",(0,s.jsx)(r.h2,{id:"monorepo-structure",children:"Monorepo Structure"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"knowledgepulse/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 sdk/            # @knowledgepulse/sdk \u2014 types, capture, retrieve, scoring, migrations\n\u2502   \u251c\u2500\u2500 mcp-server/     # @knowledgepulse/mcp \u2014 6 MCP tools, dual-mode registry bridge\n\u2502   \u251c\u2500\u2500 cli/            # @knowledgepulse/cli \u2014 search, install, validate, contribute, auth\n\u2502   \u2514\u2500\u2500 sop-studio/     # Placeholder (Phase 3)\n\u251c\u2500\u2500 registry/           # Hono REST API server (in-memory stores, auth, rate limiting)\n\u251c\u2500\u2500 specs/              # codegen.ts, validate-consistency.ts, skill-md-extension.md\n\u251c\u2500\u2500 examples/           # basic-sdk-usage, mcp-client-example, langraph-integration\n\u2514\u2500\u2500 website/            # Docusaurus documentation site\n"})}),"\n",(0,s.jsx)(r.h2,{id:"storage-model",children:"Storage Model"}),"\n",(0,s.jsxs)(r.p,{children:["Phase 1 uses ",(0,s.jsxs)(r.strong,{children:["in-memory ",(0,s.jsx)(r.code,{children:"Map<>"})," stores"]})," behind async ",(0,s.jsx)(r.code,{children:"Promise<T>"})," interfaces. This design is intentional: the async interface boundary means the storage backend can be swapped to a persistent database (PostgreSQL, SQLite, etc.) without changing any consumer code. The vector cache uses a brute-force linear scan rather than HNSW, and is likewise swappable via its interface."]}),"\n",(0,s.jsx)(r.h2,{id:"tech-stack",children:"Tech Stack"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Technology"}),(0,s.jsx)(r.th,{children:"Purpose"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Bun"})}),(0,s.jsx)(r.td,{children:"JavaScript/TypeScript runtime and package manager"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Hono"})}),(0,s.jsx)(r.td,{children:"Lightweight HTTP framework for the Registry and MCP Server"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Zod v3"})}),(0,s.jsxs)(r.td,{children:["Schema definition and validation (with ",(0,s.jsx)(r.code,{children:"zod-to-json-schema"})," for codegen)"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"tsup"})}),(0,s.jsx)(r.td,{children:"Build tool for the SDK (ESM + CJS + TypeScript declarations)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Biome"})}),(0,s.jsx)(r.td,{children:"Linter and formatter"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"@modelcontextprotocol/sdk"})}),(0,s.jsx)(r.td,{children:"MCP protocol implementation"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"bun test"})}),(0,s.jsx)(r.td,{children:"Test runner (319 tests across 15 files)"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,r,n){n.d(r,{R:()=>o,x:()=>c});var t=n(6540);const s={},i=t.createContext(s);function o(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);